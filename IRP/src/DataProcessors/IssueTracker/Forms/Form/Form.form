<?xml version="1.0" encoding="UTF-8"?>
<form:Form xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:core="http://g5.1c.ru/v8/dt/mcore" xmlns:core_1="http://g5.1c.ru/v8/dt/data-composition-system/core" xmlns:form="http://g5.1c.ru/v8/dt/form" xmlns:schema="http://g5.1c.ru/v8/dt/data-composition-system/schema">
  <items xsi:type="form:Table">
    <name>IssueList</name>
    <id>1</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
      <common>true</common>
    </userVisible>
    <dataPath xsi:type="form:DataPath">
      <segments>IssueList</segments>
    </dataPath>
    <titleLocation>None</titleLocation>
    <excludedCommands>Change</excludedCommands>
    <excludedCommands>ChangeHistory</excludedCommands>
    <excludedCommands>Copy</excludedCommands>
    <excludedCommands>CopyToClipboard</excludedCommands>
    <excludedCommands>Create</excludedCommands>
    <excludedCommands>Delete</excludedCommands>
    <excludedCommands>DynamicListStandardSettings</excludedCommands>
    <excludedCommands>FindByCurrentValue</excludedCommands>
    <excludedCommands>GetURL</excludedCommands>
    <excludedCommands>ListSettings</excludedCommands>
    <excludedCommands>LoadDynamicListSettings</excludedCommands>
    <excludedCommands>OutputList</excludedCommands>
    <excludedCommands>Post</excludedCommands>
    <excludedCommands>Refresh</excludedCommands>
    <excludedCommands>SaveDynamicListSettings</excludedCommands>
    <excludedCommands>SearchEverywhere</excludedCommands>
    <excludedCommands>SearchHistory</excludedCommands>
    <excludedCommands>SetDateInterval</excludedCommands>
    <excludedCommands>SetDeletionMark</excludedCommands>
    <excludedCommands>ShowMultipleSelection</excludedCommands>
    <excludedCommands>UndoPosting</excludedCommands>
    <items xsi:type="form:FormField">
      <name>IssueListRef</name>
      <id>23</id>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <dataPath xsi:type="form:DataPath">
        <segments>IssueList.Ref</segments>
      </dataPath>
      <extendedTooltip>
        <name>IssueListRefExtendedTooltip</name>
        <id>25</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <type>Label</type>
        <autoMaxWidth>true</autoMaxWidth>
        <autoMaxHeight>true</autoMaxHeight>
        <extInfo xsi:type="form:LabelDecorationExtInfo">
          <horizontalAlign>Left</horizontalAlign>
        </extInfo>
      </extendedTooltip>
      <contextMenu>
        <name>IssueListRefContextMenu</name>
        <id>24</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <autoFill>true</autoFill>
      </contextMenu>
      <type>LabelField</type>
      <editMode>Enter</editMode>
      <showInHeader>true</showInHeader>
      <headerHorizontalAlign>Left</headerHorizontalAlign>
      <showInFooter>true</showInFooter>
      <extInfo xsi:type="form:LabelFieldExtInfo">
        <autoMaxWidth>true</autoMaxWidth>
        <autoMaxHeight>true</autoMaxHeight>
      </extInfo>
    </items>
    <autoCommandBar>
      <name>IssueListCommandBar</name>
      <id>3</id>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <horizontalAlign>Left</horizontalAlign>
    </autoCommandBar>
    <handlers>
      <event>Selection</event>
      <name>IssueListSelection</name>
    </handlers>
    <handlers>
      <event>RefreshRequestProcessing</event>
      <name>IssueListRefreshRequestProcessing</name>
    </handlers>
    <searchStringAddition>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <name>IssueListSearchString</name>
      <id>5</id>
      <extendedTooltip>
        <name>IssueListSearchStringExtendedTooltip</name>
        <id>7</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <type>Label</type>
        <autoMaxWidth>true</autoMaxWidth>
        <autoMaxHeight>true</autoMaxHeight>
        <extInfo xsi:type="form:LabelDecorationExtInfo">
          <horizontalAlign>Left</horizontalAlign>
        </extInfo>
      </extendedTooltip>
      <contextMenu>
        <name>IssueListSearchStringContextMenu</name>
        <id>6</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <autoFill>true</autoFill>
      </contextMenu>
      <source>IssueList</source>
      <extInfo xsi:type="form:SearchStringAdditionExtInfo">
        <autoMaxWidth>true</autoMaxWidth>
      </extInfo>
    </searchStringAddition>
    <viewStatusAddition>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <name>IssueListViewStatus</name>
      <id>8</id>
      <extendedTooltip>
        <name>IssueListViewStatusExtendedTooltip</name>
        <id>10</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <type>Label</type>
        <autoMaxWidth>true</autoMaxWidth>
        <autoMaxHeight>true</autoMaxHeight>
        <extInfo xsi:type="form:LabelDecorationExtInfo">
          <horizontalAlign>Left</horizontalAlign>
        </extInfo>
      </extendedTooltip>
      <contextMenu>
        <name>IssueListViewStatusContextMenu</name>
        <id>9</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <autoFill>true</autoFill>
      </contextMenu>
      <type>ViewStatusAddition</type>
      <source>IssueList</source>
      <extInfo xsi:type="form:ViewStatusAdditionExtInfo">
        <autoMaxWidth>true</autoMaxWidth>
      </extInfo>
    </viewStatusAddition>
    <searchControlAddition>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <name>IssueListSearchControl</name>
      <id>11</id>
      <extendedTooltip>
        <name>IssueListSearchControlExtendedTooltip</name>
        <id>13</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <type>Label</type>
        <autoMaxWidth>true</autoMaxWidth>
        <autoMaxHeight>true</autoMaxHeight>
        <extInfo xsi:type="form:LabelDecorationExtInfo">
          <horizontalAlign>Left</horizontalAlign>
        </extInfo>
      </extendedTooltip>
      <contextMenu>
        <name>IssueListSearchControlContextMenu</name>
        <id>12</id>
        <visible>true</visible>
        <enabled>true</enabled>
        <userVisible>
          <common>true</common>
        </userVisible>
        <autoFill>true</autoFill>
      </contextMenu>
      <type>SearchControlAddition</type>
      <source>IssueList</source>
      <extInfo xsi:type="form:SearchControlAdditionExtInfo">
        <autoMaxWidth>true</autoMaxWidth>
      </extInfo>
    </searchControlAddition>
    <extendedTooltip>
      <name>IssueListExtendedTooltip</name>
      <id>4</id>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
      <type>Label</type>
      <autoMaxWidth>true</autoMaxWidth>
      <autoMaxHeight>true</autoMaxHeight>
      <extInfo xsi:type="form:LabelDecorationExtInfo">
        <horizontalAlign>Left</horizontalAlign>
      </extInfo>
    </extendedTooltip>
    <contextMenu>
      <name>IssueListContextMenu</name>
      <id>2</id>
      <visible>true</visible>
      <enabled>true</enabled>
      <userVisible>
        <common>true</common>
      </userVisible>
    </contextMenu>
    <representation>HierarchicalList</representation>
    <changeRowSet>true</changeRowSet>
    <changeRowOrder>true</changeRowOrder>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <autoMaxRowsCount>true</autoMaxRowsCount>
    <choiceMode>true</choiceMode>
    <selectionMode>MultiRow</selectionMode>
    <headerHeight>1</headerHeight>
    <footerHeight>1</footerHeight>
    <horizontalScrollBar>AutoUse</horizontalScrollBar>
    <verticalScrollBar>AutoUse</verticalScrollBar>
    <horizontalLines>true</horizontalLines>
    <verticalLines>true</verticalLines>
    <useAlternationRowColor>true</useAlternationRowColor>
    <searchOnInput>Auto</searchOnInput>
    <initialListView>Auto</initialListView>
    <horizontalStretch>true</horizontalStretch>
    <verticalStretch>true</verticalStretch>
    <enableStartDrag>true</enableStartDrag>
    <fileDragMode>AsFileRef</fileDragMode>
    <rowPictureDataPath xsi:type="form:DataPath">
      <segments>IssueList.DefaultPicture</segments>
    </rowPictureDataPath>
    <refreshRequest>PullFromTop</refreshRequest>
    <extInfo xsi:type="form:DynamicListTableExtInfo">
      <autoRefreshPeriod>60</autoRefreshPeriod>
      <period>
        <startDate>0001-01-01T00:00:00</startDate>
        <endDate>0001-01-01T00:00:00</endDate>
      </period>
      <topLevelParent xsi:type="core:UndefinedValue"/>
      <showRoot>true</showRoot>
      <allowGettingCurrentRowURL>true</allowGettingCurrentRowURL>
    </extInfo>
  </items>
  <autoCommandBar>
    <name>FormCommandBar</name>
    <id>-1</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
      <common>true</common>
    </userVisible>
    <horizontalAlign>Left</horizontalAlign>
  </autoCommandBar>
  <handlers>
    <event>OnCreateAtServer</event>
    <name>OnCreateAtServer</name>
  </handlers>
  <saveWindowSettings>true</saveWindowSettings>
  <autoTitle>true</autoTitle>
  <autoUrl>true</autoUrl>
  <group>Vertical</group>
  <autoFillCheck>true</autoFillCheck>
  <allowFormCustomize>true</allowFormCustomize>
  <enabled>true</enabled>
  <showTitle>true</showTitle>
  <showCloseButton>true</showCloseButton>
  <attributes>
    <name>IssueList</name>
    <title>
      <key>en</key>
      <value>Issue list</value>
    </title>
    <id>2</id>
    <valueType>
      <types>DynamicList</types>
    </valueType>
    <view>
      <common>true</common>
    </view>
    <edit>
      <common>true</common>
    </edit>
    <notDefaultUseAlwaysAttributes xsi:type="form:DataPath">
      <segments>IssueList.Ref</segments>
    </notDefaultUseAlwaysAttributes>
    <notDefaultUseAlwaysAttributes xsi:type="form:DataPath">
      <segments>IssueList.WorkOrder</segments>
    </notDefaultUseAlwaysAttributes>
    <main>true</main>
    <extInfo xsi:type="form:DynamicListExtInfo">
      <queryText>SELECT ALLOWED DISTINCT
	WorkOrderWorkers.Ref AS Ref
INTO WO
FROM
	Document.WorkOrder.Workers AS WorkOrderWorkers
WHERE
	WorkOrderWorkers.Employee = &amp;Employee 
	AND WorkOrderWorkers.Ref.Posted
;

////////////////////////////////////////////////////////////////////////////////
SELECT ALLOWED DISTINCT
	IssueRef.Ref AS Ref,
	WorkOrderIssueList.Ref AS WorkOrder,
	WorkSheetIssueList.StartJob AS StartJob,
	WorkSheetIssueList.EndJob AS EndJob
FROM
	Document.Issue AS IssueRef
		INNER JOIN Document.WorkOrder.IssueList AS WorkOrderIssueList
		ON IssueRef.Ref = WorkOrderIssueList.Issue
		LEFT JOIN Document.WorkSheet.IssueList AS WorkSheetIssueList
		ON IssueRef.Ref = WorkSheetIssueList.Issue 
		AND WorkSheetIssueList.Ref.Posted
WHERE
	WorkOrderIssueList.Ref IN
			(SELECT
				WO.Ref
			FROM
				WO)</queryText>
      <mainTable>Document.Issue</mainTable>
      <dynamicDataRead>true</dynamicDataRead>
      <autoFillAvailableFields>true</autoFillAvailableFields>
      <customQuery>true</customQuery>
      <autoSaveUserSettings>true</autoSaveUserSettings>
      <getInvisibleFieldPresentations>true</getInvisibleFieldPresentations>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Ref</dataPath>
        <field>Ref</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Location</dataPath>
        <field>Location</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Number</dataPath>
        <field>Number</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Country</dataPath>
        <field>Country</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>City</dataPath>
        <field>City</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Editor</dataPath>
        <field>Editor</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>IssueType</dataPath>
        <field>IssueType</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>IssueDetails</dataPath>
        <field>IssueDetails</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Longitude</dataPath>
        <field>Longitude</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Author</dataPath>
        <field>Author</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Latitude</dataPath>
        <field>Latitude</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Comment</dataPath>
        <field>Comment</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>SourceNodeID</dataPath>
        <field>SourceNodeID</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>CreateDate</dataPath>
        <field>CreateDate</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>ModifyDate</dataPath>
        <field>ModifyDate</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>ManualMovementsEdit</dataPath>
        <field>ManualMovementsEdit</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>AddAttributes</dataPath>
        <field>AddAttributes</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>PointInTime</dataPath>
        <field>PointInTime</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>DeletionMark</dataPath>
        <field>DeletionMark</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Posted</dataPath>
        <field>Posted</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>Date</dataPath>
        <field>Date</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>WorkOrder</dataPath>
        <field>WorkOrder</field>
        <title>
          <localValue>
            <content>
              <key>en</key>
              <value>Work order</value>
            </content>
          </localValue>
        </title>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>EndJob</dataPath>
        <field>EndJob</field>
      </fields>
      <fields xsi:type="schema:DataCompositionSchemaDataSetField">
        <dataPath>StartJob</dataPath>
        <field>StartJob</field>
      </fields>
      <parameters>
        <name>Employee</name>
        <title>
          <localValue>
            <content>
              <key>en</key>
              <value>Employee</value>
            </content>
          </localValue>
        </title>
        <valueType>
          <types>CatalogRef.Partners</types>
        </valueType>
        <values xsi:type="core_1:DesignTimeValueValue">
          <value>
            <value>Catalog.Partners.EmptyRef</value>
          </value>
        </values>
        <useRestriction>true</useRestriction>
      </parameters>
    </extInfo>
  </attributes>
  <commandInterface>
    <navigationPanel/>
    <commandBar/>
  </commandInterface>
  <extInfo xsi:type="form:DynamicListFormExtInfo"/>
</form:Form>
