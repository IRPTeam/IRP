<?xml version="1.0" encoding="UTF-8"?>
<form:Form xmlns:core="http://g5.1c.ru/v8/dt/mcore" xmlns:form="http://g5.1c.ru/v8/dt/form" xmlns:schema="http://g5.1c.ru/v8/dt/data-composition-system/schema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <items xsi:type="form:FormGroup">
  <name>ListSettingsComposerUserSettings</name>
  <id>1</id>
  <visible>true</visible>
  <enabled>true</enabled>
  <userVisible>
   <common>true</common>
  </userVisible>
  <title>
   <key>ru</key>
   <value>Группа пользовательских настроек</value>
  </title>
  <title>
   <key>en</key>
   <value>User settings group</value>
  </title>
  <title>
   <key>tr</key>
   <value>Kullanıcı ayarlar grubu</value>
  </title>
  <verticalStretch>false</verticalStretch>
  <extendedTooltip>
   <name>ListSettingsComposerUserSettingsExtendedTooltip</name>
   <id>2</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <type>Label</type>
   <autoMaxWidth>true</autoMaxWidth>
   <autoMaxHeight>true</autoMaxHeight>
   <extInfo xsi:type="form:LabelDecorationExtInfo">
    <horizontalAlign>Left</horizontalAlign>
   </extInfo>
  </extendedTooltip>
  <type>UsualGroup</type>
  <extInfo xsi:type="form:UsualGroupExtInfo">
   <group>Vertical</group>
   <representation>WeakSeparation</representation>
   <showLeftMargin>true</showLeftMargin>
   <united>true</united>
   <throughAlign>Auto</throughAlign>
   <currentRowUse>Auto</currentRowUse>
  </extInfo>
 </items>
 <items xsi:type="form:Table">
  <name>List</name>
  <id>3</id>
  <visible>true</visible>
  <enabled>true</enabled>
  <userVisible>
   <common>true</common>
  </userVisible>
  <dataPath xsi:type="form:DataPath">
   <segments>List</segments>
  </dataPath>
  <defaultItem>true</defaultItem>
  <titleLocation>None</titleLocation>
  <items xsi:type="form:FormField">
   <name>Number</name>
   <id>16</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Number</segments>
   </dataPath>
   <defaultItem>true</defaultItem>
   <extendedTooltip>
    <name>NumberExtendedTooltip</name>
    <id>18</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>NumberContextMenu</name>
    <id>17</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>LabelField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:LabelFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Date</name>
   <id>19</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Date</segments>
   </dataPath>
   <extendedTooltip>
    <name>DateExtendedTooltip</name>
    <id>21</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>DateContextMenu</name>
    <id>20</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>LabelField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:LabelFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Company</name>
   <id>22</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Company</segments>
   </dataPath>
   <extendedTooltip>
    <name>CompanyExtendedTooltip</name>
    <id>24</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>CompanyContextMenu</name>
    <id>23</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Store</name>
   <id>40</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Store</segments>
   </dataPath>
   <extendedTooltip>
    <name>StoreExtendedTooltip</name>
    <id>42</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>StoreContextMenu</name>
    <id>41</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>TransactionType</name>
   <id>31</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.TransactionType</segments>
   </dataPath>
   <extendedTooltip>
    <name>TransactionTypeExtendedTooltip</name>
    <id>33</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>TransactionTypeContextMenu</name>
    <id>32</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Status</name>
   <id>43</id>
   <title>
    <key>ru</key>
    <value>Статус</value>
   </title>
   <title>
    <key>en</key>
    <value>Status</value>
   </title>
   <title>
    <key>tr</key>
    <value>Statü</value>
   </title>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Status</segments>
   </dataPath>
   <extendedTooltip>
    <name>StatusExtendedTooltip</name>
    <id>45</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>StatusContextMenu</name>
    <id>44</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Partner</name>
   <id>28</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Partner</segments>
   </dataPath>
   <extendedTooltip>
    <name>PartnerExtendedTooltip</name>
    <id>30</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>PartnerContextMenu</name>
    <id>29</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Author</name>
   <id>37</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Author</segments>
   </dataPath>
   <extendedTooltip>
    <name>AuthorExtendedTooltip</name>
    <id>39</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>AuthorContextMenu</name>
    <id>38</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <items xsi:type="form:FormField">
   <name>Ref</name>
   <id>34</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <dataPath xsi:type="form:DataPath">
    <segments>List.Ref</segments>
   </dataPath>
   <extendedTooltip>
    <name>RefExtendedTooltip</name>
    <id>36</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>RefContextMenu</name>
    <id>35</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>InputField</type>
   <editMode>Enter</editMode>
   <showInHeader>true</showInHeader>
   <headerHorizontalAlign>Left</headerHorizontalAlign>
   <showInFooter>true</showInFooter>
   <extInfo xsi:type="form:InputFieldExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <wrap>true</wrap>
    <chooseType>true</chooseType>
    <typeDomainEnabled>true</typeDomainEnabled>
    <textEdit>true</textEdit>
   </extInfo>
  </items>
  <commandBarLocation>None</commandBarLocation>
  <autoCommandBar>
   <name>ListCommandBar</name>
   <id>5</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <horizontalAlign>Left</horizontalAlign>
  </autoCommandBar>
  <searchStringAddition>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <name>ListSearchString</name>
   <id>7</id>
   <extendedTooltip>
    <name>ListSearchStringExtendedTooltip</name>
    <id>9</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>ListSearchStringContextMenu</name>
    <id>8</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <extInfo xsi:type="form:SearchStringAdditionExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
   </extInfo>
  </searchStringAddition>
  <viewStatusAddition>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <name>ListViewStatus</name>
   <id>10</id>
   <extendedTooltip>
    <name>ListViewStatusExtendedTooltip</name>
    <id>12</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>ListViewStatusContextMenu</name>
    <id>11</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>ViewStatusAddition</type>
   <extInfo xsi:type="form:ViewStatusAdditionExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
    <horizontalLocation>Left</horizontalLocation>
   </extInfo>
  </viewStatusAddition>
  <searchControlAddition>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <name>ListSearchControl</name>
   <id>13</id>
   <extendedTooltip>
    <name>ListSearchControlExtendedTooltip</name>
    <id>15</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <type>Label</type>
    <autoMaxWidth>true</autoMaxWidth>
    <autoMaxHeight>true</autoMaxHeight>
    <extInfo xsi:type="form:LabelDecorationExtInfo">
     <horizontalAlign>Left</horizontalAlign>
    </extInfo>
   </extendedTooltip>
   <contextMenu>
    <name>ListSearchControlContextMenu</name>
    <id>14</id>
    <visible>true</visible>
    <enabled>true</enabled>
    <userVisible>
     <common>true</common>
    </userVisible>
    <autoFill>true</autoFill>
   </contextMenu>
   <type>SearchControlAddition</type>
   <extInfo xsi:type="form:SearchControlAdditionExtInfo">
    <autoMaxWidth>true</autoMaxWidth>
   </extInfo>
  </searchControlAddition>
  <extendedTooltip>
   <name>ListExtendedTooltip</name>
   <id>6</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <type>Label</type>
   <autoMaxWidth>true</autoMaxWidth>
   <autoMaxHeight>true</autoMaxHeight>
   <extInfo xsi:type="form:LabelDecorationExtInfo">
    <horizontalAlign>Left</horizontalAlign>
   </extInfo>
  </extendedTooltip>
  <contextMenu>
   <name>ListContextMenu</name>
   <id>4</id>
   <visible>true</visible>
   <enabled>true</enabled>
   <userVisible>
    <common>true</common>
   </userVisible>
   <autoFill>true</autoFill>
  </contextMenu>
  <representation>HierarchicalList</representation>
  <changeRowSet>true</changeRowSet>
  <changeRowOrder>true</changeRowOrder>
  <autoMaxWidth>true</autoMaxWidth>
  <autoMaxHeight>true</autoMaxHeight>
  <autoMaxRowsCount>true</autoMaxRowsCount>
  <selectionMode>MultiRow</selectionMode>
  <header>true</header>
  <headerHeight>1</headerHeight>
  <footerHeight>1</footerHeight>
  <horizontalScrollBar>AutoUse</horizontalScrollBar>
  <verticalScrollBar>AutoUse</verticalScrollBar>
  <horizontalLines>true</horizontalLines>
  <verticalLines>true</verticalLines>
  <useAlternationRowColor>true</useAlternationRowColor>
  <searchOnInput>Auto</searchOnInput>
  <initialListView>Auto</initialListView>
  <horizontalStretch>true</horizontalStretch>
  <verticalStretch>true</verticalStretch>
  <enableStartDrag>true</enableStartDrag>
  <enableDrag>true</enableDrag>
  <rowPictureDataPath xsi:type="form:DataPath">
   <segments>List.DefaultPicture</segments>
  </rowPictureDataPath>
  <extInfo xsi:type="form:DynamicListTableExtInfo">
   <autoRefreshPeriod>60</autoRefreshPeriod>
   <period>
    <startDate>0001-01-01T00:00:00</startDate>
    <endDate>0001-01-01T00:00:00</endDate>
   </period>
   <topLevelParent xsi:type="core:UndefinedValue"/>
   <showRoot>true</showRoot>
   <userSettingsGroup>ListSettingsComposerUserSettings</userSettingsGroup>
  </extInfo>
 </items>
 <autoCommandBar>
  <name>FormCommandBar</name>
  <id>-1</id>
  <visible>true</visible>
  <enabled>true</enabled>
  <userVisible>
   <common>true</common>
  </userVisible>
  <horizontalAlign>Left</horizontalAlign>
  <autoFill>true</autoFill>
 </autoCommandBar>
 <handlers>
  <event>OnCreateAtServer</event>
  <name>OnCreateAtServer</name>
 </handlers>
 <autoTitle>true</autoTitle>
 <autoUrl>true</autoUrl>
 <group>Vertical</group>
 <autoFillCheck>true</autoFillCheck>
 <allowFormCustomize>true</allowFormCustomize>
 <enabled>true</enabled>
 <showTitle>true</showTitle>
 <showCloseButton>true</showCloseButton>
 <attributes>
  <name>List</name>
  <id>1</id>
  <valueType>
   <types>DynamicList</types>
  </valueType>
  <view>
   <common>true</common>
  </view>
  <edit>
   <common>true</common>
  </edit>
  <main>true</main>
  <extInfo xsi:type="form:DynamicListExtInfo">
   <queryText>SELECT
	GoodsReceiptItemList.Ref AS Ref,
	COUNT(DISTINCT GoodsReceiptItemList.Store) AS StoreCount,
	MAX(GoodsReceiptItemList.Store) AS Store,
	SUM(ISNULL(GoodsReceiptItemList.QuantityInBaseUnit, 0)) AS QuantityInBaseUnit
INTO ItemListTable
FROM
	Document.GoodsReceipt.ItemList AS GoodsReceiptItemList
GROUP BY
	GoodsReceiptItemList.Ref

INDEX BY
	Ref
;

////////////////////////////////////////////////////////////////////////////////
SELECT
	GoodsReceipt.Ref AS Ref,
	CASE
		WHEN ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0) = 0
			THEN VALUE(Enum.InvoicingStatuses.Closed)
		WHEN ItemListTable.QuantityInBaseUnit = ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0)
			THEN VALUE(Enum.InvoicingStatuses.Awaiting)
		WHEN ItemListTable.QuantityInBaseUnit &lt;&gt; ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0)
			THEN VALUE(Enum.InvoicingStatuses.Invoicing)
	END AS Status,
	GoodsReceipt.DeletionMark AS DeletionMark,
	GoodsReceipt.Number AS Number,
	GoodsReceipt.Date AS Date,
	GoodsReceipt.Posted AS Posted,
	GoodsReceipt.Company AS Company,
	GoodsReceipt.LegalName AS LegalName,
	GoodsReceipt.Partner AS Partner,
	GoodsReceipt.TransactionType AS TransactionType,
	GoodsReceipt.Author AS Author,
	GoodsReceipt.Branch AS Branch,
	GoodsReceipt.Description AS Description,
	CASE
		WHEN ItemListTable.StoreCount = 1
			THEN ItemListTable.Store
		ELSE VALUE(Catalog.Stores.EmptyRef)
	END AS Store
FROM
	Document.GoodsReceipt AS GoodsReceipt
		LEFT JOIN ItemListTable AS ItemListTable
		ON ItemListTable.Ref = GoodsReceipt.Ref
		LEFT JOIN AccumulationRegister.R1031B_ReceiptInvoicing.Balance AS R1031B_ReceiptInvoicingBalance
		ON GoodsReceipt.Ref = CAST(R1031B_ReceiptInvoicingBalance.Basis AS Document.GoodsReceipt)
GROUP BY
	GoodsReceipt.Ref,
	GoodsReceipt.DeletionMark,
	GoodsReceipt.Number,
	GoodsReceipt.Date,
	GoodsReceipt.Posted,
	GoodsReceipt.Company,
	GoodsReceipt.LegalName,
	GoodsReceipt.Partner,
	GoodsReceipt.TransactionType,
	GoodsReceipt.Author,
	GoodsReceipt.Branch,
	GoodsReceipt.Description,
	CASE
		WHEN ItemListTable.StoreCount = 1
			THEN ItemListTable.Store
		ELSE VALUE(Catalog.Stores.EmptyRef)
	END,
	R1031B_ReceiptInvoicingBalance.QuantityBalance,
	CASE
		WHEN ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0) = 0
			THEN VALUE(Enum.InvoicingStatuses.Closed)
		WHEN ItemListTable.QuantityInBaseUnit = ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0)
			THEN VALUE(Enum.InvoicingStatuses.Awaiting)
		WHEN ItemListTable.QuantityInBaseUnit &lt;&gt; ISNULL(R1031B_ReceiptInvoicingBalance.QuantityBalance, 0)
			THEN VALUE(Enum.InvoicingStatuses.Invoicing)
	END</queryText>
   <mainTable>Document.GoodsReceipt</mainTable>
   <dynamicDataRead>true</dynamicDataRead>
   <autoFillAvailableFields>true</autoFillAvailableFields>
   <customQuery>true</customQuery>
   <autoSaveUserSettings>true</autoSaveUserSettings>
   <getInvisibleFieldPresentations>true</getInvisibleFieldPresentations>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Ref</dataPath>
    <field>Ref</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Status</dataPath>
    <field>Status</field>
    <title>
     <localValue>
      <content>
       <key>ru</key>
       <value>Статус</value>
      </content>
      <content>
       <key>en</key>
       <value>Status</value>
      </content>
      <content>
       <key>tr</key>
       <value>Statü</value>
      </content>
     </localValue>
    </title>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>DeletionMark</dataPath>
    <field>DeletionMark</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Number</dataPath>
    <field>Number</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Date</dataPath>
    <field>Date</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Posted</dataPath>
    <field>Posted</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Company</dataPath>
    <field>Company</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>LegalName</dataPath>
    <field>LegalName</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Partner</dataPath>
    <field>Partner</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>TransactionType</dataPath>
    <field>TransactionType</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Author</dataPath>
    <field>Author</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Branch</dataPath>
    <field>Branch</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Description</dataPath>
    <field>Description</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Store</dataPath>
    <field>Store</field>
    <title>
     <localValue>
      <content>
       <key>ru</key>
       <value>Склад</value>
      </content>
      <content>
       <key>en</key>
       <value>Store</value>
      </content>
      <content>
       <key>tr</key>
       <value>Depo</value>
      </content>
     </localValue>
    </title>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>Basis</dataPath>
    <field>Basis</field>
   </fields>
   <fields xsi:type="schema:DataCompositionSchemaDataSetField">
    <dataPath>ItemKey</dataPath>
    <field>ItemKey</field>
   </fields>
  </extInfo>
 </attributes>
 <commandInterface>
  <navigationPanel/>
  <commandBar/>
 </commandInterface>
 <extInfo xsi:type="form:DynamicListFormExtInfo"/>
</form:Form>